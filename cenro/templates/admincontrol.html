{% load static %}
{% load points_filters %}


<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Boxicons from multiple CDNs for reliability -->
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link href='https://cdn.jsdelivr.net/npm/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <!-- My CSS -->
  <link rel="stylesheet" href="{% static 'style.css' %}">
  <link rel="stylesheet" href="{% static 'css/admincontrol.css' %}?v={{ timestamp }}">
  <link rel="stylesheet" href="{% static 'css/unified-modal.css' %}">
    

  <title>AdminPanel</title>
  <link rel="icon" type="image/png" href="{% static 'image/clogo.png' %}">
</head>
<body>


  <!-- SIDEBAR -->
  <section id="sidebar">
    <a href="#" class="brand">
      <i class='bx bxs-group' ></i>
      <span class="text">CENRO Admin</span>
    </a>
    <ul class="side-menu top">
      <!-- Dashboard/Home -->
      <li>
        <a href="{% url 'cenro:dashboard' %}">
          <i class='bx bxs-dashboard'></i>
          <span class="text">Dashboard</span>
        </a>
      </li>

      {% if can_manage_users %}
      <li>
        <a href="{% url 'cenro:adminuser' %}">
          <i class='bx bxs-user-detail' ></i>
          <span class="text">User Management</span>
        </a>
      </li>
      {% endif %}

      {% if admin_user.role == 'super_admin' %}
			<li>
				<a href="{% url 'cenro:admin_management' %}">
					<i class='bx bxs-user-detail' ></i>
					<span class="text">Admin Management</span>
				</a>
			</li>
			{% endif %}
      
      {% if can_manage_controls %}
      <li class="active">
        <a href="{% url 'cenro:admincontrol' %}">
          <i class='bx bxs-component' ></i>
          <span class="text">Controls Management</span>
        </a>
      </li>
      {% endif %}
      
      {% if can_manage_points %}
      <li>
        <a href="{% url 'cenro:adminpoints' %}">
          <i class='bx bxs-star'  ></i>
          <span class="text">Points Management</span>
        </a>
      </li>
      {% endif %}
      
      {% if can_manage_rewards %}
      <li>
        <a href="{% url 'cenro:adminrewards' %}">
          <i class='bx bxs-gift' ></i>
          <span class="text">Rewards Management</span>
        </a>
      </li>
      {% endif %}

      {% if can_manage_schedules %}
      <li>
        <a href="{% url 'cenro:adminschedule' %}">
          <i class='bx bxs-calendar' ></i>
          <span class="text">Schedule Management</span>
        </a>
      </li>
      {% endif %}
      
      {% if can_manage_security %}
      <li>
        <a href="{% url 'cenro:security_dashboard' %}">
          <i class='bx bxs-shield' ></i>
          <span class="text">Security Management</span>
        </a>
      </li>
      {% endif %}
      
      {% if can_manage_learning %}
      <li>
        <a href="{% url 'cenro:adminlearn' %}">
          <i class='bx bxs-book-content' ></i>
          <span class="text">Learning Management</span>
        </a>
      </li>
      {% endif %}
      
      {% if can_manage_games %}
      <li>
        <a href="{% url 'cenro:admingames' %}">
          <i class='bx bxs-game' ></i>
          <span class="text">Games Management</span>
        </a>
      </li>
      {% endif %}
      
      <li>
        <a href="{% url 'cenro:waste_analytics' %}">
          <i class='bx bxs-bar-chart-alt-2' ></i>
          <span class="text">Waste Analytics</span>
        </a>
      </li>
      
      <!-- Security Analyst Special Dashboard -->
      {% if admin_role == 'security_analyst' %}
      <li>
        <a href="{% url 'cenro:adminsecurity' %}">
          <i class='bx bxs-dashboard' ></i>
          <span class="text">Security Dashboard</span>
        </a>
      </li>
      {% endif %}

    </ul>
    <ul class="side-menu">
      <li>
        <a href="{% url 'cenro:admin_logout' %}" class="logout">
          <i class='bx bxs-log-out-circle' ></i>
          <span class="text">Logout</span>
        </a>
      </li>
    </ul>
  </section>
  <!-- SIDEBAR -->



  <!-- CONTENT -->
  <section id="content">
    <!-- NAVBAR -->
    <nav>
      <i class='bx bx-menu' ></i>
      
      <!-- Admin User Profile Section -->
      {% if is_admin_authenticated %}
      <div class="profile" style="margin-left: auto; display: flex; align-items: center; gap: 10px;">
				<!-- Admin Notification Bell -->
				{% include 'includes/notification_bell.html' %}
				
				<div class="admin-info" style="text-align: right; margin-right: 10px;">
          <span style="display: block; font-weight: 600; color: #333;">{{ admin_full_name }}</span>
          <span style="display: block; font-size: 0.8rem; color: #666;">{{ admin_role_display }}</span>
        </div>
        <i class='bx bxs-user-circle' style="font-size: 2rem; color: #667eea;"></i>
      </div>
      {% else %}
      <div class="profile" style="margin-left: auto;">
        <a href="{% url 'cenro:admin_login' %}" style="color: #667eea; text-decoration: none;">
          <i class='bx bx-log-in' style="font-size: 1.5rem;"></i>
          <span>Login</span>
        </a>
      </div>
      {% endif %}
    </nav>
    <!-- NAVBAR -->

    <!-- MAIN -->
    <main>
    <h1></h1>
      <div class="head-title">
        <div class="left">
          <h1>Admin Controls</h1>
          <ul class="breadcrumb">
            <li>
              <a href="#">Controls</a>
            </li>
            <li><i class='bx bx-chevron-right' ></i></li>
            <li>
              <a class="active" href="#">Home</a>
            </li>
          </ul>
        </div>
      </div>


      <!-- Tab Container -->
      <div class="tab-container">
        <div class="tab-nav">
          <button class="tab-button active" onclick="openTab(event, 'wasteTypesTab')">
            <i class='bx bx-recycle'></i> Waste Types
          </button>
          <button class="tab-button" onclick="openTab(event, 'barangaysTab')">
            <i class='bx bx-map'></i> Barangays
          </button>
          <button class="tab-button" onclick="openTab(event, 'rewardCategoriesTab')">
            <i class='bx bx-category'></i> Reward Categories
          </button>
          <button class="tab-button" onclick="openTab(event, 'termsTab')">
            <i class='bx bx-file-blank'></i> Terms & Conditions
          </button>
        </div>

        <!-- Waste Types Tab -->
        <div id="wasteTypesTab" class="tab-content" style="display: block;">
          <div class="reward-header">
            <h2>Waste Types</h2>
            <div class="reward-icons">
              <button class="add-reward-btn" onclick="document.getElementById('addWasteTypeModal').style.display='flex'">+ Add Waste Type</button>
            </div>
          </div>
          <div class="reward-table-wrapper">
            <table class="reward-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Points per kg</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for waste in waste_types %}
                <tr>
                  <td>{{ waste.name }}</td>
                  <td>{{ waste.points_per_kg|smart_points }}</td>
                  <td class="reward-actions">
                    <button class="reward-action-btn" onclick="openEditWasteTypeModal('{{ waste.id }}', '{{ waste.name }}', '{{ waste.points_per_kg }}')">
                      <i class='bx bx-edit' style="color:#10b981;font-size:1.2rem;"></i>
                    </button>
                    <form id="deleteWasteTypeForm_{{ waste.id }}" method="POST" action="{% url 'cenro:delete_waste_type' waste.id %}" style="display:inline;" onsubmit="return showConfirmation(event, 'delete', 'Waste Type', 'deleteWasteTypeForm_{{ waste.id }}');">
                      {% csrf_token %}
                      <button type="submit" class="reward-action-btn" style="background:none;border:none;">
                        <i class='bx bx-trash' style="color:#ef4444;font-size:1.2rem;"></i>
                      </button>
                    </form>
                  </td>
                </tr>
                {% empty %}
                <tr><td colspan="3">No waste types found.</td></tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>

        <!-- Barangays Tab -->
        <div id="barangaysTab" class="tab-content" style="display: none;">
          <div class="reward-header">
            <h2>Barangays</h2>
            <div class="reward-icons">
              <button class="add-reward-btn" onclick="document.getElementById('addBarangayModal').style.display='flex'">+ Add Barangay</button>
            </div>
          </div>
          <div class="reward-table-wrapper">
            <table class="reward-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for barangay in barangays %}
                <tr>
                  <td>{{ barangay.name }}</td>
                  <td class="reward-actions">
                    <form id="deleteBarangayForm_{{ barangay.id }}" method="POST" action="{% url 'cenro:delete_barangay' barangay.id %}" style="display:inline;" onsubmit="return showConfirmation(event, 'delete', 'Barangay', 'deleteBarangayForm_{{ barangay.id }}');">
                      {% csrf_token %}
                      <button type="submit" class="reward-action-btn" style="background:none;border:none;">
                        <i class='bx bx-trash' style="color:#ef4444;font-size:1.2rem;"></i>
                      </button>
                    </form>
                  </td>
                </tr>
                {% empty %}
                <tr><td colspan="2">No barangays found.</td></tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>

        <!-- Reward Categories Tab -->
        <div id="rewardCategoriesTab" class="tab-content" style="display: none;">
          <div class="reward-header">
            <h2>Reward Categories</h2>
            <div class="reward-icons">
              <button class="add-reward-btn" onclick="document.getElementById('addRewardCategoryModal').style.display='flex'">+ Add Reward Category</button>
            </div>
          </div>
          <div class="reward-table-wrapper">
            <table class="reward-table">
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Description</th>
                  <th>Active</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                {% for category in reward_categories %}
                <tr>
                  <td>{{ category.name }}</td>
                  <td>{{ category.description }}</td>
                  <td>{{ category.is_active|yesno:"Yes,No" }}</td>
                  <td class="reward-actions">
                    <button class="reward-action-btn" onclick="openEditRewardCategoryModal('{{ category.id }}', '{{ category.name|escapejs }}', '{{ category.description|escapejs }}')">
                      <i class='bx bx-edit' style="color:#10b981;font-size:1.2rem;"></i>
                    </button>
                    <form id="deleteRewardCategoryForm_{{ category.id }}" method="POST" action="{% url 'cenro:delete_reward_category' category.id %}" style="display:inline;" onsubmit="return showConfirmation(event, 'delete', 'Reward Category', 'deleteRewardCategoryForm_{{ category.id }}');">
                      {% csrf_token %}
                      <button type="submit" class="reward-action-btn" style="background:none;border:none;">
                        <i class='bx bx-trash' style="color:#ef4444;font-size:1.2rem;"></i>
                      </button>
                    </form>
                  </td>
                </tr>
                {% empty %}
                <tr><td colspan="4">No categories found.</td></tr>
                {% endfor %}
              </tbody>
            </table>
          </div>
        </div>

        <!-- Terms and Conditions Tab -->
        <div id="termsTab" class="tab-content" style="display: none;">
          <div class="reward-header">
            <h2>Terms and Conditions</h2>
            <div class="reward-icons">
              <button class="add-reward-btn" onclick="openAddTermsModal()">+ Add Terms & Conditions</button>
            </div>
          </div>
          
          <!-- Help Section -->
          <div style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 12px; padding: 20px; margin-bottom: 20px; color: white;">
            <div style="display: flex; align-items: start; gap: 15px;">
              <i class='bx bx-info-circle' style="font-size: 2rem; flex-shrink: 0;"></i>
              <div style="flex: 1;">
                <h3 style="margin: 0 0 10px 0; font-size: 1.1rem;">How to Create Terms & Conditions</h3>
                <p style="margin: 0 0 10px 0; line-height: 1.6; opacity: 0.95;">
                  You can either type your terms directly or upload a PDF/DOCX file that will be automatically extracted. 
                  We recommend using our templates for a professional format.
                </p>
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                  <a href="{% static 'templates/E-KOLEK_Terms_and_Conditions_English_v1.0.txt' %}" download style="display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: white; text-decoration: none; font-size: 0.9rem; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    <i class='bx bx-download'></i> Download English Template
                  </a>
                  <a href="{% static 'templates/E-KOLEK_Mga_Tuntunin_at_Kundisyon_Tagalog_v1.0.txt' %}" download style="display: inline-flex; align-items: center; gap: 6px; padding: 8px 16px; background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); border-radius: 6px; color: white; text-decoration: none; font-size: 0.9rem; font-weight: 600; transition: all 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.3)'" onmouseout="this.style.background='rgba(255,255,255,0.2)'">
                    <i class='bx bx-download'></i> Download Tagalog Template
                  </a>
                </div>
              </div>
            </div>
          </div>
          
          <div class="terms-language-sections" style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px;">
            <!-- English Terms Section -->
            <div class="terms-section" style="border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px;">
              <h3 style="display: flex; align-items: center; gap: 10px; color: #1f2937; margin-bottom: 15px;">
                <i class='bx bx-world' style="color: #3b82f6;"></i> English Version
              </h3>
              <div class="reward-table-wrapper">
                <table class="reward-table">
                  <thead>
                    <tr>
                      <th>Title</th>
                      <th>Version</th>
                      <th>Status</th>
                      <th>Updated</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for terms in terms_and_conditions %}
                      {% if terms.language == 'english' %}
                      <tr {% if terms.is_active %}style="background-color: #f0fdf4;"{% endif %}>
                        <td>
                          <strong>{{ terms.title }}</strong>
                          {% if terms.file %}
                          <br><small><i class='bx bx-file'></i> File attached</small>
                          {% endif %}
                        </td>
                        <td><span style="background: #dbeafe; color: #1e40af; padding: 4px 12px; border-radius: 12px; font-size: 0.85rem;">v{{ terms.version }}</span></td>
                        <td>
                          {% if terms.is_active %}
                          <span style="background: #dcfce7; color: #166534; padding: 4px 12px; border-radius: 12px; font-size: 0.85rem; font-weight: 600;">
                            <i class='bx bx-check-circle'></i> Active
                          </span>
                          {% else %}
                          <span style="background: #f3f4f6; color: #6b7280; padding: 4px 12px; border-radius: 12px; font-size: 0.85rem;">
                            Inactive
                          </span>
                          {% endif %}
                        </td>
                        <td><small>{{ terms.updated_at|date:"M d, Y" }}</small></td>
                        <td class="reward-actions">
                          <button class="reward-action-btn view-terms-btn" 
                                  data-id="{{ terms.id }}" 
                                  data-title="{{ terms.title|escapejs }}" 
                                  data-version="{{ terms.version }}" 
                                  data-content="{{ terms.content|escapejs }}" 
                                  data-language="{{ terms.language }}" 
                                  data-file="{% if terms.file %}{{ terms.file.url }}{% endif %}" 
                                  title="View">
                            <i class='bx bx-show' style="color:#6366f1;font-size:1.2rem;"></i>
                          </button>
                          <button class="reward-action-btn" onclick="openEditTermsModal('{{ terms.id }}')" title="Edit">
                            <i class='bx bx-edit' style="color:#10b981;font-size:1.2rem;"></i>
                          </button>
                          <form method="POST" action="{% url 'cenro:toggle_active_terms' terms.id %}" id="toggleTermsForm_{{ terms.id }}" style="display:inline;">
                            {% csrf_token %}
                            <button type="button" class="reward-action-btn" onclick="showConfirmation(event, '{% if terms.is_active %}deactivate{% else %}activate{% endif %}', 'Terms v{{ terms.version }}', 'toggleTermsForm_{{ terms.id }}')" title="{% if terms.is_active %}Deactivate{% else %}Activate{% endif %}">
                              <i class='bx {% if terms.is_active %}bx-toggle-right{% else %}bx-toggle-left{% endif %}' style="color:#f59e0b;font-size:1.2rem;"></i>
                            </button>
                          </form>
                          <form method="POST" action="{% url 'cenro:delete_terms' terms.id %}" id="deleteTermsForm_{{ terms.id }}" style="display:inline;">
                            {% csrf_token %}
                            <button type="button" class="reward-action-btn" onclick="showConfirmation(event, 'delete', 'Terms v{{ terms.version }}', 'deleteTermsForm_{{ terms.id }}')" title="Delete">
                              <i class='bx bx-trash' style="color:#ef4444;font-size:1.2rem;"></i>
                            </button>
                          </form>
                        </td>
                      </tr>
                      {% endif %}
                    {% empty %}
                      <tr><td colspan="5" style="text-align: center; padding: 20px; color: #9ca3af;">No English terms available</td></tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>

            <!-- Tagalog Terms Section -->
            <div class="terms-section" style="border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px;">
              <h3 style="display: flex; align-items: center; gap: 10px; color: #1f2937; margin-bottom: 15px;">
                <i class='bx bx-world' style="color: #10b981;"></i> Tagalog Version
              </h3>
              <div class="reward-table-wrapper">
                <table class="reward-table">
                  <thead>
                    <tr>
                      <th>Title</th>
                      <th>Version</th>
                      <th>Status</th>
                      <th>Updated</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    {% for terms in terms_and_conditions %}
                      {% if terms.language == 'tagalog' %}
                      <tr {% if terms.is_active %}style="background-color: #f0fdf4;"{% endif %}>
                        <td>
                          <strong>{{ terms.title }}</strong>
                          {% if terms.file %}
                          <br><small><i class='bx bx-file'></i> File attached</small>
                          {% endif %}
                        </td>
                        <td><span style="background: #dbeafe; color: #1e40af; padding: 4px 12px; border-radius: 12px; font-size: 0.85rem;">v{{ terms.version }}</span></td>
                        <td>
                          {% if terms.is_active %}
                          <span style="background: #dcfce7; color: #166534; padding: 4px 12px; border-radius: 12px; font-size: 0.85rem; font-weight: 600;">
                            <i class='bx bx-check-circle'></i> Active
                          </span>
                          {% else %}
                          <span style="background: #f3f4f6; color: #6b7280; padding: 4px 12px; border-radius: 12px; font-size: 0.85rem;">
                            Inactive
                          </span>
                          {% endif %}
                        </td>
                        <td><small>{{ terms.updated_at|date:"M d, Y" }}</small></td>
                        <td class="reward-actions">
                          <button class="reward-action-btn view-terms-btn" 
                                  data-id="{{ terms.id }}" 
                                  data-title="{{ terms.title|escapejs }}" 
                                  data-version="{{ terms.version }}" 
                                  data-content="{{ terms.content|escapejs }}" 
                                  data-language="{{ terms.language }}" 
                                  data-file="{% if terms.file %}{{ terms.file.url }}{% endif %}" 
                                  title="View">
                            <i class='bx bx-show' style="color:#6366f1;font-size:1.2rem;"></i>
                          </button>
                          <button class="reward-action-btn" onclick="openEditTermsModal('{{ terms.id }}')" title="Edit">
                            <i class='bx bx-edit' style="color:#10b981;font-size:1.2rem;"></i>
                          </button>
                          <form method="POST" action="{% url 'cenro:toggle_active_terms' terms.id %}" id="toggleTermsForm_{{ terms.id }}" style="display:inline;">
                            {% csrf_token %}
                            <button type="button" class="reward-action-btn" onclick="showConfirmation(event, '{% if terms.is_active %}deactivate{% else %}activate{% endif %}', 'Terms v{{ terms.version }}', 'toggleTermsForm_{{ terms.id }}')" title="{% if terms.is_active %}Deactivate{% else %}Activate{% endif %}">
                              <i class='bx {% if terms.is_active %}bx-toggle-right{% else %}bx-toggle-left{% endif %}' style="color:#f59e0b;font-size:1.2rem;"></i>
                            </button>
                          </form>
                          <form method="POST" action="{% url 'cenro:delete_terms' terms.id %}" id="deleteTermsForm_{{ terms.id }}" style="display:inline;">
                            {% csrf_token %}
                            <button type="button" class="reward-action-btn" onclick="showConfirmation(event, 'delete', 'Terms v{{ terms.version }}', 'deleteTermsForm_{{ terms.id }}')" title="Delete">
                              <i class='bx bx-trash' style="color:#ef4444;font-size:1.2rem;"></i>
                            </button>
                          </form>
                        </td>
                      </tr>
                      {% endif %}
                    {% empty %}
                      <tr><td colspan="5" style="text-align: center; padding: 20px; color: #9ca3af;">No Tagalog terms available</td></tr>
                    {% endfor %}
                  </tbody>
                </table>
              </div>
            </div>
          </div>

          <div class="info-box" style="background: #eff6ff; border: 2px solid #bfdbfe; border-radius: 12px; padding: 16px; margin-top: 20px;">
            <p style="margin: 0; display: flex; align-items: start; gap: 12px; color: #1e40af;">
              <i class='bx bx-info-circle' style="font-size: 1.5rem; flex-shrink: 0;"></i>
              <span><strong>Note:</strong> Only one version per language can be active at a time. Users must accept the active terms during registration. You can upload PDF or DOC files, and the system will automatically extract the content. Both English and Tagalog versions are required for complete user coverage.</span>
            </p>
          </div>
        </div>
      </div>

  </main>

    
  </section>
  
  



  <!-- Add Waste Type Modal -->
<div class="modal-overlay" id="addWasteTypeModal" style="display: none;">
  <div class="modal-content" style="padding: 35px;">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 25px;">
      <div>
        <h3 style="margin: 0 0 8px 0; font-size: 1.5rem; color: #1f2937; display: flex; align-items: center; gap: 10px;">
          <i class='bx bx-plus-circle' style="color: #667eea; font-size: 1.6rem;"></i>
          Add Waste Type
        </h3>
        <p style="color: #6b7280; margin: 0; font-size: 0.9rem;">Create a new waste type for collection tracking</p>
      </div>
      <button type="button" onclick="document.getElementById('addWasteTypeModal').style.display='none'" style="background: #f3f4f6; border: none; width: 40px; height: 40px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;" onmouseover="this.style.background='#e5e7eb'; this.style.transform='rotate(90deg)'" onmouseout="this.style.background='#f3f4f6'; this.style.transform='rotate(0deg)'">
        <i class='bx bx-x' style="font-size: 1.6rem; color: #6b7280;"></i>
      </button>
    </div>
    <form method="POST" action="{% url 'cenro:add_waste_type' %}" id="addWasteTypeForm" onsubmit="return showConfirmation(event, 'add', 'Waste Type', 'addWasteTypeForm');">
      {% csrf_token %}
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem; display: flex; align-items: center; gap: 6px;">
          <i class='bx bx-category' style="color: #667eea; font-size: 1.1rem;"></i> Waste Type Name
        </label>
        <input type="text" name="name" id="waste_name" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem; color: #374151; transition: all 0.3s ease;" placeholder="e.g., Plastic Bottles">
      </div>
      <div style="margin-bottom: 25px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem; display: flex; align-items: center; gap: 6px;">
          <i class='bx bx-star' style="color: #667eea; font-size: 1.1rem;"></i> Points per Kilogram
        </label>
        <input type="number" name="points_per_kg" id="waste_points" class="points-input" min="0" step="0.01" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem; color: #374151; transition: all 0.3s ease;" placeholder="e.g., 5">
      </div>
      <div style="margin-top: 30px; display: flex; gap: 12px; justify-content: flex-end;">
        <button type="button" onclick="document.getElementById('addWasteTypeModal').style.display='none'" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: #f3f4f6; border: 2px solid #e5e7eb; color: #6b7280; transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer;">
          <i class='bx bx-x' style="font-size: 1.2rem;"></i> Cancel
        </button>
        <button type="submit" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4); transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer;">
          <i class='bx bx-save' style="font-size: 1.2rem;"></i> Add Waste Type
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Edit Waste Type Modal -->
<div class="modal-overlay" id="editWasteTypeModal" style="display: none;">
  <div class="modal-content" style="padding: 35px;">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 25px;">
      <div>
        <h3 style="margin: 0 0 8px 0; font-size: 1.5rem; color: #1f2937; display: flex; align-items: center; gap: 10px;">
          <i class='bx bx-edit' style="color: #667eea; font-size: 1.6rem;"></i>
          Edit Waste Type
        </h3>
        <p style="color: #6b7280; margin: 0; font-size: 0.9rem;">Update waste type information</p>
      </div>
      <button type="button" onclick="document.getElementById('editWasteTypeModal').style.display='none'" style="background: #f3f4f6; border: none; width: 40px; height: 40px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;" onmouseover="this.style.background='#e5e7eb'; this.style.transform='rotate(90deg)'" onmouseout="this.style.background='#f3f4f6'; this.style.transform='rotate(0deg)'">
        <i class='bx bx-x' style="font-size: 1.6rem; color: #6b7280;"></i>
      </button>
    </div>
    <form id="editWasteTypeForm" method="POST" onsubmit="return showConfirmation(event, 'update', 'Waste Type', 'editWasteTypeForm');">
      {% csrf_token %}
      <input type="hidden" name="id" id="editWasteId">
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem; display: flex; align-items: center; gap: 6px;">
          <i class='bx bx-category' style="color: #667eea; font-size: 1.1rem;"></i> Waste Type Name
        </label>
        <input type="text" name="name" id="editWasteName" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem; color: #374151; transition: all 0.3s ease;">
      </div>
      <div style="margin-bottom: 25px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem; display: flex; align-items: center; gap: 6px;">
          <i class='bx bx-star' style="color: #667eea; font-size: 1.1rem;"></i> Points per Kilogram
        </label>
        <input type="number" name="points_per_kg" id="editWastePoints" class="points-input" min="0" step="0.01" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem; color: #374151; transition: all 0.3s ease;">
      </div>
      <div style="margin-top: 30px; display: flex; gap: 12px; justify-content: flex-end;">
        <button type="button" onclick="document.getElementById('editWasteTypeModal').style.display='none'" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: #f3f4f6; border: 2px solid #e5e7eb; color: #6b7280; transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer;">
          <i class='bx bx-x' style="font-size: 1.2rem;"></i> Cancel
        </button>
        <button type="submit" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4); transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer;">
          <i class='bx bx-save' style="font-size: 1.2rem;"></i> Update
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Add Barangay Modal -->
<div class="modal-overlay" id="addBarangayModal" style="display: none;">
  <div class="modal-content" style="padding: 35px;">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 25px;">
      <div>
        <h3 style="margin: 0 0 8px 0; font-size: 1.5rem; color: #1f2937; display: flex; align-items: center; gap: 10px;">
          <i class='bx bx-map' style="color: #667eea; font-size: 1.6rem;"></i>
          Add Barangay
        </h3>
        <p style="color: #6b7280; margin: 0; font-size: 0.9rem;">Register a new barangay in the system</p>
      </div>
      <button type="button" onclick="document.getElementById('addBarangayModal').style.display='none'" style="background: #f3f4f6; border: none; width: 40px; height: 40px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;" onmouseover="this.style.background='#e5e7eb'; this.style.transform='rotate(90deg)'" onmouseout="this.style.background='#f3f4f6'; this.style.transform='rotate(0deg)'">
        <i class='bx bx-x' style="font-size: 1.6rem; color: #6b7280;"></i>
      </button>
    </div>
    <form method="POST" action="{% url 'cenro:add_barangay' %}" id="addBarangayForm" onsubmit="return showConfirmation(event, 'add', 'Barangay', 'addBarangayForm');">
      {% csrf_token %}
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem; display: flex; align-items: center; gap: 6px;">
          <i class='bx bx-buildings' style="color: #667eea; font-size: 1.1rem;"></i> Barangay Name
        </label>
        <input type="text" name="name" id="barangay_name" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem; color: #374151; transition: all 0.3s ease;" placeholder="e.g., Barangay Poblacion">
      </div>
      <div style="margin-top: 30px; display: flex; gap: 12px; justify-content: flex-end;">
        <button type="button" onclick="document.getElementById('addBarangayModal').style.display='none'" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: #f3f4f6; border: 2px solid #e5e7eb; color: #6b7280; transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer;">
          <i class='bx bx-x' style="font-size: 1.2rem;"></i> Cancel
        </button>
        <button type="submit" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4); transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer;">
          <i class='bx bx-save' style="font-size: 1.2rem;"></i> Add Barangay
        </button>
      </div>
    </form>
  </div>
</div>


<!-- Add Reward Category Modal -->
<div class="modal-overlay" id="addRewardCategoryModal" style="display: none;">
  <div class="modal-content" style="padding: 35px;">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 25px;">
      <div>
        <h3 style="margin: 0 0 8px 0; font-size: 1.5rem; color: #1f2937; display: flex; align-items: center; gap: 10px;">
          <i class='bx bx-purchase-tag' style="color: #667eea; font-size: 1.6rem;"></i>
          Add Reward Category
        </h3>
        <p style="color: #6b7280; margin: 0; font-size: 0.9rem;">Create a new category for organizing rewards</p>
      </div>
      <button type="button" onclick="document.getElementById('addRewardCategoryModal').style.display='none'" style="background: #f3f4f6; border: none; width: 40px; height: 40px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;" onmouseover="this.style.background='#e5e7eb'; this.style.transform='rotate(90deg)'" onmouseout="this.style.background='#f3f4f6'; this.style.transform='rotate(0deg)'">
        <i class='bx bx-x' style="font-size: 1.6rem; color: #6b7280;"></i>
      </button>
    </div>
    <form method="POST" action="{% url 'cenro:add_reward_category' %}" id="addRewardCategoryForm" onsubmit="return showConfirmation(event, 'add', 'Reward Category', 'addRewardCategoryForm');">
      {% csrf_token %}
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem; display: flex; align-items: center; gap: 6px;">
          <i class='bx bx-category' style="color: #667eea; font-size: 1.1rem;"></i> Category Name
        </label>
        <input type="text" name="name" id="category_name" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem; color: #374151; transition: all 0.3s ease;" placeholder="e.g., Electronics">
      </div>
      <div style="margin-bottom: 25px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem; display: flex; align-items: center; gap: 6px;">
          <i class='bx bx-message-detail' style="color: #667eea; font-size: 1.1rem;"></i> Description
        </label>
        <input type="text" name="description" id="category_desc" style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem; color: #374151; transition: all 0.3s ease;" placeholder="Optional description">
      </div>
      <div style="margin-top: 30px; display: flex; gap: 12px; justify-content: flex-end;">
        <button type="button" onclick="document.getElementById('addRewardCategoryModal').style.display='none'" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: #f3f4f6; border: 2px solid #e5e7eb; color: #6b7280; transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer;">
          <i class='bx bx-x' style="font-size: 1.2rem;"></i> Cancel
        </button>
        <button type="submit" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4); transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer;">
          <i class='bx bx-save' style="font-size: 1.2rem;"></i> Add Category
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Edit Reward Category Modal -->
<div class="modal-overlay" id="editRewardCategoryModal" style="display: none;">
  <div class="modal-content" style="padding: 35px;">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 25px;">
      <div>
        <h3 style="margin: 0 0 8px 0; font-size: 1.5rem; color: #1f2937; display: flex; align-items: center; gap: 10px;">
          <i class='bx bx-edit' style="color: #667eea; font-size: 1.6rem;"></i>
          Edit Reward Category
        </h3>
        <p style="color: #6b7280; margin: 0; font-size: 0.9rem;">Update category information</p>
      </div>
      <button type="button" onclick="document.getElementById('editRewardCategoryModal').style.display='none'" style="background: #f3f4f6; border: none; width: 40px; height: 40px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;" onmouseover="this.style.background='#e5e7eb'; this.style.transform='rotate(90deg)'" onmouseout="this.style.background='#f3f4f6'; this.style.transform='rotate(0deg)'">
        <i class='bx bx-x' style="font-size: 1.6rem; color: #6b7280;"></i>
      </button>
    </div>
    <form id="editRewardCategoryForm" method="POST" onsubmit="return showConfirmation(event, 'update', 'Reward Category', 'editRewardCategoryForm');">
      {% csrf_token %}
      <input type="hidden" name="id" id="editCategoryId">
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem; display: flex; align-items: center; gap: 6px;">
          <i class='bx bx-category' style="color: #667eea; font-size: 1.1rem;"></i> Category Name
        </label>
        <input type="text" name="name" id="editCategoryName" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem; color: #374151; transition: all 0.3s ease;">
      </div>
      <div style="margin-bottom: 25px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem; display: flex; align-items: center; gap: 6px;">
          <i class='bx bx-message-detail' style="color: #667eea; font-size: 1.1rem;"></i> Description
        </label>
        <input type="text" name="description" id="editCategoryDesc" style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem; color: #374151; transition: all 0.3s ease;">
      </div>
      <div style="margin-top: 30px; display: flex; gap: 12px; justify-content: flex-end;">
        <button type="button" onclick="document.getElementById('editRewardCategoryModal').style.display='none'" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: #f3f4f6; border: 2px solid #e5e7eb; color: #6b7280; transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer;">
          <i class='bx bx-x' style="font-size: 1.2rem;"></i> Cancel
        </button>
        <button type="submit" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4); transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer;">
          <i class='bx bx-save' style="font-size: 1.2rem;"></i> Update
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Universal Confirmation Modal -->
<div class="modal-overlay" id="confirmationModal" style="display: none;">
  <div class="modal-content" style="padding: 35px; max-width: 500px;">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 25px;">
      <div>
        <h3 style="margin: 0 0 8px 0; font-size: 1.5rem; color: #1f2937; display: flex; align-items: center; gap: 10px;">
          <i class='bx bx-check-circle' style="color: #667eea; font-size: 1.6rem;" id="confirmIcon"></i>
          <span id="confirmTitle">Confirm Action</span>
        </h3>
        <p style="color: #6b7280; margin: 0; font-size: 0.9rem;" id="confirmSubtitle">Please review your changes</p>
      </div>
      <button type="button" onclick="closeConfirmation()" style="background: #f3f4f6; border: none; width: 40px; height: 40px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;" onmouseover="this.style.background='#e5e7eb'; this.style.transform='rotate(90deg)'" onmouseout="this.style.background='#f3f4f6'; this.style.transform='rotate(0deg)'">
        <i class='bx bx-x' style="font-size: 1.6rem; color: #6b7280;"></i>
      </button>
    </div>
    
    <div style="background: #f0f9ff; border: 2px solid #bae6fd; border-radius: 12px; padding: 20px; margin-bottom: 25px;">
      <div style="display: flex; align-items: start; gap: 12px;">
        <i class='bx bx-info-circle' style="font-size: 1.5rem; color: #0284c7; flex-shrink: 0; margin-top: 2px;"></i>
        <div>
          <h4 style="color: #0c4a6e; margin: 0 0 8px 0; font-size: 1rem; font-weight: 600;">Confirm Changes</h4>
          <p style="color: #075985; margin: 0; font-size: 0.9rem; line-height: 1.5;" id="confirmMessage">Are you sure you want to proceed with this action?</p>
        </div>
      </div>
    </div>

    <div style="display: flex; gap: 12px; justify-content: flex-end;">
      <button type="button" onclick="closeConfirmation()" style="padding: 14px 24px; border-radius: 10px; font-weight: 600; background: #f3f4f6; border: 2px solid #e5e7eb; color: #6b7280; transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 0.95rem;">
        <i class='bx bx-x' style="font-size: 1.2rem;"></i> Cancel
      </button>
      <button type="button" onclick="confirmAction()" id="confirmButton" style="padding: 14px 24px; border-radius: 10px; font-weight: 600; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; box-shadow: 0 4px 16px rgba(102, 126, 234, 0.4); transition: all 0.2s; display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 0.95rem;">
        <i class='bx bx-check' style="font-size: 1.2rem;"></i> Confirm
      </button>
    </div>
  </div>
</div>

<!-- Add Terms and Conditions Modal -->
<div class="modal-overlay" id="addTermsModal" style="display: none;">
  <div class="modal-content" style="padding: 35px; max-width: 800px; max-height: 90vh; overflow-y: auto;">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 25px;">
      <div>
        <h3 style="margin: 0 0 8px 0; font-size: 1.5rem; color: #1f2937; display: flex; align-items: center; gap: 10px;">
          <i class='bx bx-file-blank' style="color: #667eea; font-size: 1.6rem;"></i>
          Add Terms & Conditions
        </h3>
        <p style="color: #6b7280; margin: 0; font-size: 0.9rem;">Create new terms document for users</p>
      </div>
      <button type="button" onclick="closeAddTermsModal()" style="background: #f3f4f6; border: none; width: 40px; height: 40px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center; transition: all 0.2s;">
        <i class='bx bx-x' style="font-size: 1.6rem; color: #6b7280;"></i>
      </button>
    </div>
    <form method="POST" action="{% url 'cenro:add_terms' %}" id="addTermsForm" enctype="multipart/form-data" onsubmit="return showConfirmation(event, 'add', 'Terms & Conditions', 'addTermsForm');">
      {% csrf_token %}
      
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem;">
          <i class='bx bx-world'></i> Language
        </label>
        <select name="language" id="add_language" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem;">
          <option value="english">English</option>
          <option value="tagalog">Tagalog</option>
        </select>
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem;">
          <i class='bx bx-upload'></i> Upload File (Optional - PDF or DOC)
        </label>
        <input type="file" name="file" id="add_file" accept=".pdf,.doc,.docx" style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px;" onchange="handleFileUploadAdd(event)">
        <small style="color: #6b7280; display: block; margin-top: 5px;">
          <i class='bx bx-info-circle'></i> Upload a PDF or DOC file to auto-fill fields below
        </small>
        <div id="add_upload_progress" style="display: none; margin-top: 10px;">
          <div style="background: #e5e7eb; border-radius: 10px; height: 8px; overflow: hidden;">
            <div id="add_progress_bar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 100%; width: 0%; transition: width 0.3s;"></div>
          </div>
          <small id="add_progress_text" style="color: #6b7280; display: block; margin-top: 5px;">Extracting content...</small>
        </div>
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem;">
          <i class='bx bx-heading'></i> Title
        </label>
        <input type="text" name="title" id="add_title" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px;" placeholder="e.g., Terms and Conditions of Use">
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem;">
          <i class='bx bx-tag'></i> Version
        </label>
        <input type="text" name="version" id="add_version" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px;" placeholder="e.g., 1.0">
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem;">
          <i class='bx bx-text'></i> Content
        </label>
        <textarea name="content" id="add_content" rows="12" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-family: monospace; font-size: 0.9rem;" placeholder="Enter the full terms and conditions text here..."></textarea>
        <small style="color: #6b7280; display: block; margin-top: 5px;">
          This content will be displayed to users during registration
        </small>
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
          <input type="checkbox" name="is_active" id="add_is_active" value="true" style="width: 20px; height: 20px;">
          <span style="font-weight: 600; color: #1f2937;">Set as Active Version</span>
        </label>
        <small style="color: #6b7280; display: block; margin-left: 30px; margin-top: 5px;">
          Only one version per language can be active at a time
        </small>
      </div>

      <div style="margin-top: 30px; display: flex; gap: 12px; justify-content: flex-end;">
        <button type="button" onclick="closeAddTermsModal()" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: #f3f4f6; border: 2px solid #e5e7eb; color: #6b7280; cursor: pointer;">
          <i class='bx bx-x'></i> Cancel
        </button>
        <button type="submit" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; cursor: pointer;">
          <i class='bx bx-save'></i> Save Terms
        </button>
      </div>
    </form>
  </div>
</div>

<!-- Edit Terms and Conditions Modal -->
<div class="modal-overlay" id="editTermsModal" style="display: none;">
  <div class="modal-content" style="padding: 35px; max-width: 800px; max-height: 90vh; overflow-y: auto;">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 25px;">
      <div>
        <h3 style="margin: 0 0 8px 0; font-size: 1.5rem; color: #1f2937; display: flex; align-items: center; gap: 10px;">
          <i class='bx bx-edit' style="color: #667eea; font-size: 1.6rem;"></i>
          Edit Terms & Conditions
        </h3>
        <p style="color: #6b7280; margin: 0; font-size: 0.9rem;">Update terms document</p>
      </div>
      <button type="button" onclick="closeEditTermsModal()" style="background: #f3f4f6; border: none; width: 40px; height: 40px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
        <i class='bx bx-x' style="font-size: 1.6rem; color: #6b7280;"></i>
      </button>
    </div>
    <form method="POST" id="editTermsForm" enctype="multipart/form-data" onsubmit="return showConfirmation(event, 'update', 'Terms & Conditions', 'editTermsForm');">
      {% csrf_token %}
      <input type="hidden" name="terms_id" id="edit_terms_id">
      
      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem;">
          <i class='bx bx-world'></i> Language
        </label>
        <select name="language" id="edit_language" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-size: 0.95rem;">
          <option value="english">English</option>
          <option value="tagalog">Tagalog</option>
        </select>
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem;">
          <i class='bx bx-upload'></i> Upload New File (Optional)
        </label>
        <input type="file" name="file" id="edit_file" accept=".pdf,.doc,.docx" style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px;" onchange="handleFileUploadEdit(event)">
        <div id="edit_current_file" style="margin-top: 10px; display: none;">
          <small style="color: #10b981;"><i class='bx bx-check-circle'></i> Current file: <span id="edit_file_name"></span></small>
        </div>
        <div id="edit_upload_progress" style="display: none; margin-top: 10px;">
          <div style="background: #e5e7eb; border-radius: 10px; height: 8px; overflow: hidden;">
            <div id="edit_progress_bar" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); height: 100%; width: 0%;"></div>
          </div>
          <small id="edit_progress_text" style="color: #6b7280; display: block; margin-top: 5px;">Extracting content...</small>
        </div>
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem;">
          <i class='bx bx-heading'></i> Title
        </label>
        <input type="text" name="title" id="edit_title" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px;">
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem;">
          <i class='bx bx-tag'></i> Version
        </label>
        <input type="text" name="version" id="edit_version" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px;">
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: block; margin-bottom: 10px; font-weight: 700; color: #1f2937; font-size: 0.9rem;">
          <i class='bx bx-text'></i> Content
        </label>
        <textarea name="content" id="edit_content" rows="12" required style="width: 100%; padding: 14px 18px; border: 2px solid #e5e7eb; border-radius: 10px; font-family: monospace; font-size: 0.9rem;"></textarea>
      </div>

      <div style="margin-bottom: 20px;">
        <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
          <input type="checkbox" name="is_active" id="edit_is_active" value="true" style="width: 20px; height: 20px;">
          <span style="font-weight: 600; color: #1f2937;">Set as Active Version</span>
        </label>
      </div>

      <div style="margin-top: 30px; display: flex; gap: 12px; justify-content: flex-end;">
        <button type="button" onclick="closeEditTermsModal()" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: #f3f4f6; border: 2px solid #e5e7eb; color: #6b7280; cursor: pointer;">
          <i class='bx bx-x'></i> Cancel
        </button>
        <button type="submit" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: none; color: white; cursor: pointer;">
          <i class='bx bx-save'></i> Update Terms
        </button>
      </div>
    </form>
  </div>
</div>

<!-- View Terms Modal -->
<div class="modal-overlay" id="viewTermsModal" style="display: none;">
  <div class="modal-content" style="padding: 35px; max-width: 900px; max-height: 90vh; overflow-y: auto;">
    <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 25px;">
      <div>
        <h3 style="margin: 0 0 8px 0; font-size: 1.5rem; color: #1f2937; display: flex; align-items: center; gap: 10px;">
          <i class='bx bx-show' style="color: #6366f1; font-size: 1.6rem;"></i>
          <span id="view_title"></span>
        </h3>
        <p style="color: #6b7280; margin: 0; font-size: 0.9rem;">
          <span id="view_language_badge"></span> 
          <span id="view_version_badge"></span>
        </p>
      </div>
      <button type="button" onclick="closeViewTermsModal()" style="background: #f3f4f6; border: none; width: 40px; height: 40px; border-radius: 10px; cursor: pointer; display: flex; align-items: center; justify-content: center;">
        <i class='bx bx-x' style="font-size: 1.6rem; color: #6b7280;"></i>
      </button>
    </div>

    <div id="view_file_link" style="margin-bottom: 20px; display: none;">
      <a href="#" id="view_file_url" target="_blank" style="display: inline-flex; align-items: center; gap: 8px; padding: 10px 16px; background: #eff6ff; border: 2px solid #bfdbfe; border-radius: 8px; color: #1e40af; text-decoration: none; font-weight: 600;">
        <i class='bx bx-download'></i> Download Original File
      </a>
    </div>

    <div style="background: #f9fafb; border: 2px solid #e5e7eb; border-radius: 12px; padding: 20px; max-height: 60vh; overflow-y: auto;">
      <pre id="view_content" style="white-space: pre-wrap; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 0.95rem; line-height: 1.6; margin: 0; color: #1f2937;"></pre>
    </div>

    <div style="margin-top: 25px; display: flex; justify-content: flex-end;">
      <button type="button" onclick="closeViewTermsModal()" style="padding: 13px 26px; border-radius: 10px; font-weight: 600; background: #f3f4f6; border: 2px solid #e5e7eb; color: #6b7280; cursor: pointer;">
        <i class='bx bx-x'></i> Close
      </button>
    </div>
  </div>
</div>

<script src="{% static 'script.js' %}"></script>
<script src="{% static 'js/tab-persistence.js' %}?v={{ timestamp }}"></script>
<script src="{% static 'js/admincontrol.js' %}?v={{ timestamp }}"></script>
<script src="{% static 'js/unified-modal.js' %}"></script>
<script src="{% static 'js/points-input-handler.js' %}?v={{ timestamp }}"></script>
<script src="{% static 'js/admin_terms.js' %}?v={{ timestamp }}"></script>

	<script src="{% static 'js/admin_notifications.js' %}"></script>
</body>
</html>




