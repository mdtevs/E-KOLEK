{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="csrf-token" content="{{ csrf_token }}">
  <title>E-KOLEK - Forgot Password</title>
  <link rel="stylesheet" href="{% static 'css/login.css' %}" />
  <link rel="stylesheet" href="{% static 'css/forgot_password.css' %}" />
</head>

<body>
  <header>
    <div class="container">
      <div class="flex-center">
        <img src="{% static 'image/clogo.png' %}" alt="E-KOLEK Logo" class="header-logo">
        <h1>E-KOLEK</h1>
      </div>
    </div>
  </header>

  <main>
    <h2>Forgot Password</h2>
    <p>Enter your username or email to reset your password</p>

    {% if messages %}
      {% for message in messages %}
        <div class="{% if message.tags == 'error' %}error-message{% else %}success-message{% endif %}">
          {{ message }}
        </div>
      {% endfor %}
    {% endif %}

    <div class="info-box">
      <p>ğŸ’¡ <strong>How it works:</strong> Enter your username or email, choose how you want to receive the verification code (SMS or Email), and we'll send you a code to reset your password.</p>
      <p style="margin-top: 0.5rem; font-size: 0.8rem;">ğŸ“§ <strong>Email delivery:</strong> Email verification codes may take 1-2 minutes to arrive. Please check your spam/junk folder if you don't see it in your inbox.</p>
    </div>

    <form method="POST" action="{% url 'forgot_password' %}">
      {% csrf_token %}
      
      <div>
        <input 
          type="text" 
          name="identifier" 
          id="identifier"
          placeholder="Enter Username or Email" 
          value="{{ pre_filled_username }}"
          required 
        />
      </div>

      <div class="method-selection">
        <div class="method-button active" id="smsMethod" onclick="selectMethod('sms')">
          <div class="icon">ğŸ“±</div>
          <div class="label">SMS</div>
        </div>
        <div class="method-button" id="emailMethod" onclick="selectMethod('email')">
          <div class="icon">ğŸ“§</div>
          <div class="label">Email</div>
        </div>
      </div>

      <input type="hidden" name="otp_method" id="otp_method" value="sms">

      <div>
        <button type="submit">Send Verification Code</button>
      </div>
    </form>

    <div class="back-link">
      <a href="{% url 'login_page' %}">â† Back to Login</a>
    </div>
  </main>

  <div id="loader"><div class="spinner"></div></div>

  <script src="{% static 'js/forgot_password.js' %}"></script>
</body>
</html>
